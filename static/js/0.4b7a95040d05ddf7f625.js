webpackJsonp([0],{"9C8T":function(t,e,s){"use strict";var n=s("gyMJ"),a=s("Au9i"),i={props:["id"],data:function(){return{pageindex:1,commentsList:[],msg:""}},created:function(){this.getComments(this.id,this.pageindex)},methods:{getComments:function(t,e){var s=this;n.a.getcomments(t,e).then(function(t){0===t.data.status?s.commentsList=s.commentsList.concat(t.data.message):Object(a.Toast)({message:"请求评论失败",duration:5e3})})},getMore:function(){this.pageindex++,this.getComments(this.id,this.pageindex)},postComment:function(){var t=this;if(0===this.msg.trim().length)return Object(a.Toast)("评论内容不能为空");var e={content:this.msg.trim()};console.log(e),n.a.postcomment(this.id,e).then(function(e){if(console.log("wwww",e),0===e.data.status){var s={user_name:"匿名用户",add_time:Date.now(),content:t.msg.trim()};Object(a.Toast)("评论成功！！！"),t.commentsList.unshift(s)}else Object(a.Toast)("评论失败！")})}}},o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"cmt-container"},[s("h3",[t._v("发表评论")]),t._v(" "),s("hr"),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.msg,expression:"msg"}],attrs:{placeholder:"请输入要吐槽的内容（最多吐槽120字）",maxlength:"120"},domProps:{value:t.msg},on:{input:function(e){e.target.composing||(t.msg=e.target.value)}}}),t._v(" "),s("mt-button",{attrs:{size:"large",type:"primary"},on:{click:t.postComment}},[t._v("发表评论")]),t._v(" "),s("div",{staticClass:"cmt-list"},t._l(t.commentsList,function(e,n){return s("div",{key:n,staticClass:"cmt-item"},[s("div",{staticClass:"cmt-title"},[t._v("\n                第"+t._s(n+1)+"楼  用户："+t._s(e.user_name)+"  发表时间："+t._s(t._f("dateFormat")(e.add_time))+"\n            ")]),t._v(" "),s("div",{staticClass:"cmt-body"},[t._v("\n                "+t._s("undefined"===e.content?"ta什么都没留下":e.content)+"\n            ")])])}),0),t._v(" "),s("mt-button",{attrs:{size:"large",type:"danger",plain:""},on:{click:t.getMore}},[t._v("加载更多")])],1)},staticRenderFns:[]};var m=s("VU/8")(i,o,!1,function(t){s("E/5e")},"data-v-550a1c82",null);e.a=m.exports},"E/5e":function(t,e){}});
//# sourceMappingURL=0.4b7a95040d05ddf7f625.js.map