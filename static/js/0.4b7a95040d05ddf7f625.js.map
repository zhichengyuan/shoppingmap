{"version":3,"sources":["webpack:///src/components/subcomponents/comment.vue","webpack:///./src/components/subcomponents/comment.vue?c059","webpack:///./src/components/subcomponents/comment.vue"],"names":["comment","props","data","pageindex","commentsList","msg","created","this","getComments","id","methods","_this","api","getcomments","then","res","status","concat","message","Object","mint_ui_common","duration","getMore","postComment","_this2","trim","length","content","console","log","postcomment","cmt","user_name","add_time","Date","now","unshift","subcomponents_comment","render","_vm","_h","$createElement","_c","_self","staticClass","_v","directives","name","rawName","value","expression","attrs","placeholder","maxlength","domProps","on","input","$event","target","composing","size","type","click","_l","item","index","key","_s","_f","plain","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"kFAyBAA,GACAC,OACA,MAEAC,KAJA,WAKA,OACAC,UAAA,EACAC,gBACAC,IAAA,KAGAC,QAXA,WAYAC,KAAAC,YAAAD,KAAAE,GAAAF,KAAAJ,YAEAO,SAEAF,YAFA,SAEAC,EAAAN,GAAA,IAAAQ,EAAAJ,KACYK,EAAA,EAAZC,YAAAJ,EAAAN,GAAAW,KAAA,SAAAC,GACA,IAAAA,EAAAb,KAAAc,OAEAL,EAAAP,aAAAO,EAAAP,aAAAa,OAAAF,EAAAb,KAAAgB,SAEoBC,OAAAC,EAAA,MAAAD,EACpBD,QAAA,SACAG,SAAA,SAMAC,QAhBA,WAiBAf,KAAAJ,YACAI,KAAAC,YAAAD,KAAAE,GAAAF,KAAAJ,YAGAoB,YArBA,WAqBA,IAAAC,EAAAjB,KACA,OAAAA,KAAAF,IAAAoB,OAAAC,OACA,OAAAP,OAAAC,EAAA,MAAAD,CAAA,YAEA,IAAAjB,GACAyB,QAAApB,KAAAF,IAAAoB,QAEAG,QAAAC,IAAA3B,GACYU,EAAA,EAAZkB,YAAAvB,KAAAE,GAAAP,GAAAY,KAAA,SAAAC,GAEA,GADAa,QAAAC,IAAA,OAAAd,GACA,IAAAA,EAAAb,KAAAc,OAAA,CACA,IAAAe,GACAC,UAAA,OACAC,SAAAC,KAAAC,MACAR,QAAAH,EAAAnB,IAAAoB,QAEoBN,OAAAC,EAAA,MAAAD,CAApB,WACAK,EAAApB,aAAAgC,QAAAL,QAEoBZ,OAAAC,EAAA,MAAAD,CAApB,cC5EekB,GADEC,OAFjB,WAA0B,IAAAC,EAAAhC,KAAaiC,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,kBAA4BF,EAAA,MAAAH,EAAAM,GAAA,UAAAN,EAAAM,GAAA,KAAAH,EAAA,MAAAH,EAAAM,GAAA,KAAAH,EAAA,YAA4EI,aAAaC,KAAA,QAAAC,QAAA,UAAAC,MAAAV,EAAA,IAAAW,WAAA,QAAgEC,OAASC,YAAA,sBAAAC,UAAA,OAAsDC,UAAWL,MAAAV,EAAA,KAAkBgB,IAAKC,MAAA,SAAAC,GAAyBA,EAAAC,OAAAC,YAAsCpB,EAAAlC,IAAAoD,EAAAC,OAAAT,WAA8BV,EAAAM,GAAA,KAAAH,EAAA,aAA8BS,OAAOS,KAAA,QAAAC,KAAA,WAAgCN,IAAKO,MAAAvB,EAAAhB,eAAyBgB,EAAAM,GAAA,UAAAN,EAAAM,GAAA,KAAAH,EAAA,OAAyCE,YAAA,YAAuBL,EAAAwB,GAAAxB,EAAA,sBAAAyB,EAAAC,GAAgD,OAAAvB,EAAA,OAAiBwB,IAAAD,EAAArB,YAAA,aAAiCF,EAAA,OAAYE,YAAA,cAAwBL,EAAAM,GAAA,sBAAAN,EAAA4B,GAAAF,EAAA,YAAA1B,EAAA4B,GAAAH,EAAAhC,WAAA,UAAAO,EAAA4B,GAAA5B,EAAA6B,GAAA,aAAA7B,CAAAyB,EAAA/B,WAAA,oBAAAM,EAAAM,GAAA,KAAAH,EAAA,OAAiLE,YAAA,aAAuBL,EAAAM,GAAA,qBAAAN,EAAA4B,GAAA,cAAAH,EAAArC,QAAA,WAAAqC,EAAArC,SAAA,wBAAqH,GAAAY,EAAAM,GAAA,KAAAH,EAAA,aAAiCS,OAAOS,KAAA,QAAAC,KAAA,SAAAQ,MAAA,IAA0Cd,IAAKO,MAAAvB,EAAAjB,WAAqBiB,EAAAM,GAAA,eAE9pCyB,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACEzE,EACAqC,GATF,EAVA,SAAAqC,GACEF,EAAQ,SAaV,kBAEA,MAUeG,EAAA,EAAAJ,EAAiB","file":"static/js/0.4b7a95040d05ddf7f625.js","sourcesContent":["<template>\r\n    <div class=\"cmt-container\">\r\n        <h3>发表评论</h3>\r\n        <hr>\r\n        <textarea placeholder=\"请输入要吐槽的内容（最多吐槽120字）\" maxlength=\"120\" v-model=\"msg\"></textarea>\r\n        <mt-button size=\"large\" type=\"primary\" @click=\"postComment\">发表评论</mt-button>\r\n\r\n        <div class=\"cmt-list\">\r\n            <div class=\"cmt-item\" v-for='(item,index) in commentsList' :key=\"index\">\r\n                <div class=\"cmt-title\">\r\n                    第{{index + 1}}楼&nbsp;&nbsp;用户：{{item.user_name}}&nbsp;&nbsp;发表时间：{{item.add_time | dateFormat}}\r\n                </div>\r\n                <div class=\"cmt-body\">\r\n                    {{item.content === 'undefined' ? 'ta什么都没留下' : item.content}}\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n         <mt-button size=\"large\" type=\"danger\" plain @click=\"getMore\">加载更多</mt-button>\r\n    </div>\r\n</template>\r\n<script>\r\nimport api from '@/api/index.js'\r\nimport { Toast } from 'mint-ui'\r\n\r\nexport default {\r\n    props:[\r\n        'id'\r\n    ],\r\n    data(){\r\n        return{\r\n            pageindex:1,//默认展示第一页\r\n            commentsList:[],//评论列表\r\n            msg:''//评论内容\r\n        }\r\n    },\r\n    created() {\r\n        this.getComments(this.id,this.pageindex)\r\n    },\r\n    methods: {\r\n        //获取评论\r\n        getComments(id,pageindex) {\r\n            api.getcomments(id,pageindex).then(res => {\r\n                if(res.data.status === 0) {\r\n                    // this.commentsList = res.data.message;\r\n                    this.commentsList = this.commentsList.concat(res.data.message);\r\n                } else {\r\n                    Toast({\r\n                        message: '请求评论失败',\r\n                        duration: 5000\r\n                    });\r\n                }\r\n            })\r\n        },\r\n        //获取更多评论\r\n        getMore() {\r\n            this.pageindex ++;\r\n            this.getComments(this.id,this.pageindex);\r\n        },\r\n        //提交评论\r\n        postComment(){\r\n            if(this.msg.trim().length === 0) {\r\n                return Toast('评论内容不能为空');\r\n            }\r\n            let data = {\r\n                content:this.msg.trim()\r\n            }\r\n            console.log(data);\r\n            api.postcomment(this.id,data).then(res => {\r\n                console.log('wwww',res);\r\n                if(res.data.status === 0) {\r\n                    var cmt = {\r\n                        user_name:'匿名用户',\r\n                        add_time: Date.now(),\r\n                        content: this.msg.trim()\r\n                    };\r\n                    Toast('评论成功！！！');\r\n                    this.commentsList.unshift(cmt);\r\n                } else {\r\n                    Toast('评论失败！')\r\n                }\r\n            })\r\n        }\r\n    },\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.cmt-container{\r\n    h3{\r\n        font-size: 18px;\r\n    }\r\n    textarea{\r\n        font-size: 14px;\r\n        height: 85px;\r\n        margin: 0;\r\n    }\r\n\r\n    .cmt-list{\r\n        margin:5px 0;\r\n        .cmt-item{\r\n            font-size: 13px;\r\n            .cmt-title{\r\n                line-height: 30px;\r\n                background-color: #ccc;\r\n            }\r\n            .cmt-body{\r\n                line-height: 35px;\r\n                text-indent: 2em;\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n</style>\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/subcomponents/comment.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"cmt-container\"},[_c('h3',[_vm._v(\"发表评论\")]),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.msg),expression:\"msg\"}],attrs:{\"placeholder\":\"请输入要吐槽的内容（最多吐槽120字）\",\"maxlength\":\"120\"},domProps:{\"value\":(_vm.msg)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.msg=$event.target.value}}}),_vm._v(\" \"),_c('mt-button',{attrs:{\"size\":\"large\",\"type\":\"primary\"},on:{\"click\":_vm.postComment}},[_vm._v(\"发表评论\")]),_vm._v(\" \"),_c('div',{staticClass:\"cmt-list\"},_vm._l((_vm.commentsList),function(item,index){return _c('div',{key:index,staticClass:\"cmt-item\"},[_c('div',{staticClass:\"cmt-title\"},[_vm._v(\"\\n                第\"+_vm._s(index + 1)+\"楼  用户：\"+_vm._s(item.user_name)+\"  发表时间：\"+_vm._s(_vm._f(\"dateFormat\")(item.add_time))+\"\\n            \")]),_vm._v(\" \"),_c('div',{staticClass:\"cmt-body\"},[_vm._v(\"\\n                \"+_vm._s(item.content === 'undefined' ? 'ta什么都没留下' : item.content)+\"\\n            \")])])}),0),_vm._v(\" \"),_c('mt-button',{attrs:{\"size\":\"large\",\"type\":\"danger\",\"plain\":\"\"},on:{\"click\":_vm.getMore}},[_vm._v(\"加载更多\")])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-550a1c82\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/subcomponents/comment.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-550a1c82\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./comment.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./comment.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./comment.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-550a1c82\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./comment.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-550a1c82\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/subcomponents/comment.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}