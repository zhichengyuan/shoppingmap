webpackJsonp([3],{"7yjH":function(t,s,n){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=n("Au9i"),o=n("gyMJ"),a=n("Cdyp"),i={props:["min","max"],data:function(){return{count:1}},methods:{addGoods:function(){this.count<this.max?this.count++:Object(e.Toast)("最多购买"+this.max+"个"),this.$emit("getCount",{count:this.count})},jianGoods:function(){this.count>1&&this.count--,this.$emit("getCount",{count:this.count})},countChanged:function(){console.log("ghjk",this.count),this.count>this.max&&(Object(e.Toast)("最多购买"+this.max+"个"),this.count=this.max),this.$emit("getCount",{count:this.count})}}},c={render:function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"mui-numbox",attrs:{"data-numbox-min":"1","data-numbox-max":"9"}},[n("button",{staticClass:"mui-btn mui-btn-numbox-minus",attrs:{type:"button"},on:{click:t.jianGoods}},[t._v("-")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.count,expression:"count"}],staticClass:"mui-input-numbox",attrs:{id:"test",type:"number"},domProps:{value:t.count},on:{input:[function(s){s.target.composing||(t.count=s.target.value)},t.countChanged]}}),t._v(" "),n("button",{staticClass:"mui-btn mui-btn-numbox-plus",attrs:{type:"button"},on:{click:t.addGoods}},[t._v("+")])])},staticRenderFns:[]},u=n("VU/8")(i,c,!1,null,null,null).exports,r={data:function(){return{list:[],goodsInfo:{},ballFlag:!1,selectedCount:1}},created:function(){var t=this.$route.params.id;this.getThumimages(t),this.getGoodsInfo(t)},methods:{getThumimages:function(t){var s=this;o.a.getThumimages(t).then(function(t){0===t.data.status&&(t.data.message.forEach(function(t){t.img_url=t.src}),s.list=t.data.message)})},getGoodsInfo:function(t){var s=this;o.a.getGoodsInfo(t).then(function(t){0===t.data.status&&(s.goodsInfo=t.data.message[0])})},goDesc:function(){var t=this.$route.params.id;this.$router.push({name:"goodsdesc",params:{id:t}})},goComments:function(){var t=this.$route.params.id;this.$router.push({name:"goodscomments",params:{id:t}})},addToshopCar:function(){this.ballFlag=!this.ballFlag;var t={id:this.$route.params.id,count:this.selectedCount,price:this.goodsInfo.sell_price,selected:!0};this.$store.commit("addToCar",t)},beforeEnter:function(t){t.style.transform="translate(0,0)"},enter:function(t,s){t.offsetWidth;var n=this.$refs.ball.getBoundingClientRect(),e=document.getElementById("badge").getBoundingClientRect(),o=e.left-n.left,a=e.top-n.top;t.style.transform="translate("+o+"px,"+a+"px)",t.style.transition="all 0.5s cubic-bezier(.4,-0.3,1,.68)",s()},afterEnter:function(t){this.ballFlag=!this.ballFlag},getSelectedCount:function(t){console.log(t),this.selectedCount=t.count}},components:{Lunbotu:a.a,numbox:u}},d={render:function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"goodsinfo-container"},[n("transition",{on:{"before-enter":t.beforeEnter,enter:t.enter,"after-enter":t.afterEnter}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.ballFlag,expression:"ballFlag"}],ref:"ball",staticClass:"ball"})]),t._v(" "),n("div",{staticClass:"mui-card"},[n("div",{staticClass:"mui-card-content"},[n("div",{staticClass:"mui-card-content-inner"},[n("lunbotu",{attrs:{lunboTu:t.list,isfull:!1}})],1)])]),t._v(" "),n("div",{staticClass:"mui-card"},[n("div",{staticClass:"mui-card-header"},[t._v(t._s(t.goodsInfo.title))]),t._v(" "),n("div",{staticClass:"mui-card-content"},[n("div",{staticClass:"mui-card-content-inner"},[n("p",[t._v("\n                    市场价："),n("del",[t._v("￥"+t._s(t.goodsInfo.market_price))]),t._v("  销售价："),n("span",{staticClass:"now_price"},[t._v("￥"+t._s(t.goodsInfo.sell_price))])]),t._v(" "),n("div",{staticClass:"shopcar"},[n("span",[t._v("购买数量：")]),t._v(" "),n("numbox",{attrs:{min:1,max:t.goodsInfo.stock_quantity},on:{getCount:t.getSelectedCount}})],1),t._v(" "),n("p",[n("mt-button",{attrs:{size:"small",type:"primary"}},[t._v("立即购买")]),t._v(" "),n("mt-button",{attrs:{size:"small",type:"danger"},on:{click:t.addToshopCar}},[t._v("加入购物车")])],1)])])]),t._v(" "),n("div",{staticClass:"mui-card"},[n("div",{staticClass:"mui-card-header"},[t._v("商品参数")]),t._v(" "),n("div",{staticClass:"mui-card-content"},[n("div",{staticClass:"mui-card-content-inner"},[n("p",[t._v("商品货号："+t._s(t.goodsInfo.goods_no))]),t._v(" "),n("p",[t._v("库存情况："+t._s(t.goodsInfo.stock_quantity))]),t._v(" "),n("p",[t._v("上架时间："+t._s(t._f("dateFormat")(t.goodsInfo.add_time)))])])]),t._v(" "),n("div",{staticClass:"mui-card-footer"},[n("mt-button",{attrs:{size:"large",type:"primary",plain:""},on:{click:t.goDesc}},[t._v("图文介绍")]),t._v(" "),n("mt-button",{attrs:{size:"large",type:"danger",plain:""},on:{click:t.goComments}},[t._v("商品评论")])],1)])],1)},staticRenderFns:[]};var l=n("VU/8")(r,d,!1,function(t){n("d/88")},"data-v-916e4ce4",null);s.default=l.exports},"d/88":function(t,s){}});
//# sourceMappingURL=3.b6d3271547ed17f153b6.js.map